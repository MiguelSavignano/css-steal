(function(){var e=function(){var e={},t=null,n=[],r="  ",o=!1,u=arguments,s=function(){if(0===u.length)throw new Error("CSSSteal expects at least one argument (DOM element)");if(!document.styleSheets)throw new Error("CSSSteal: document.styleSheets is not available in this browser.");o=l(u,!0)},c=function(){return o.outerHTML},l=function(e,t){var n,r=[];for(n=0;n<e.length;n++)(!t||e[n])&&(r[n]=e[n]);return r},i=function(e){var t,n=document.styleSheets,r=[];e.matches=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector;for(var o in n){var u=n[o].rules||n[o].cssRules;for(var s in u)t=u[s].selectorText?u[s].selectorText.split(" ").map(function(e){return e.split(/(:|::)/)[0]}).join(" "):!1,e.matches(t)&&r.push(u[s])}return r},a=function(e){return e.reduce(function(e,t){return e.push(i(t)),e=e.concat(a(l(t.children)))},[])},f=function(e){var t=function(e,t){return t.filter(function(t){return t.selector===e})},n=function(e,n){var r=t(e,n);return r.length>0?r[0]:{selector:e,styles:{}}},r=function(e,n){var r=t(e.selector,n);0===r.length&&n.push(e)},o=[];return e.forEach(function(e){e.forEach(function(e){for(var t=n(e.selectorText,o),u=0;u<e.style.length;u++){var s=e.style[u];t.styles[s]=e.style.getPropertyValue(s)}r(t,o)})}),o};return s(),t=c(),n=f(a(o)),e.toCSSText=function(){return n.reduce(function(e,t){return e+=t.selector+" {\n",e+=Object.keys(t.styles).reduce(function(e,n){return e.push(r+n+": "+t.styles[n]+";"),e},[]).join("\n"),e+="\n}\n"},"")},e.toJS=function(){return n},e},t=this;"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.CSSSteal=e):t.CSSSteal=e}).call(this);